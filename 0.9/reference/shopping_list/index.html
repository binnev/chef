<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Shopping list - yes-chef</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../assets/_mkdocstrings.css" rel="stylesheet" />
        <link href="../../css/version-select.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Shopping list";
        var mkdocs_page_input_path = "reference/shopping_list.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> yes-chef
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">How-to</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../how-to/walkthrough/">Walkthrough</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Commands</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/init/">init</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/new_recipe/">new recipe</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/export/">export</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/new_plan/">new plan</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/plan_recipe/">plan recipe</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/view_plan/">view plan</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../commands/view_list/">view list</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Recipe format</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../recipe/yaml/">YAML recipe format</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../recipe/markdown/">Exporting to Markdown</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API reference</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../unit/">Unit</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Shopping list</a>
    <ul class="current">
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ingredient/">Ingredient</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">yes-chef</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">API reference</li>
      <li class="breadcrumb-item active">Shopping list</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div class="doc doc-object doc-module">



<a id="src.api.shopping_list"></a>
  <div class="doc doc-contents first">
  
      <p>Handles the merging of multiple ingredient lists into one shopping list.</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="src.api.shopping_list.MergedIngredient" class="doc doc-heading">
          <code>MergedIngredient</code>


</h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>

  
      <p>Container class to hold merged Ingredients. Handles a mixture of
amountless, unitless, and fully populated Ingredients. It is not possible
to merge a fully populated unit with an amountless unit -- e.g. "2, kg,
potatoes" and "potatoes". This is why we need the following attributes</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Attributes:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>amountless</code></b>
                  (<code>list[<span title="src.api.shopping_list.RecipeName">RecipeName</span>]</code>)
              –
              <div class="doc-md-description">
                <p>for Ingredients without an amount, we just want to keep
track of which recipes we need them for. So that instead of seeing
"coriander" in the shopping list, we see "coriander: enough for
recipes A, B, C"</p>
              </div>
            </li>
            <li>
              <b><code>unitless</code></b>
                  (<code><span title="src.api.shopping_list.Number">Number</span></code>)
              –
              <div class="doc-md-description">
                <p>for Ingredients with no units, we can simply add the amounts,
e.g. "2 apples" + "3 apples" = "5 apples"</p>
              </div>
            </li>
            <li>
              <b><code>units</code></b>
                  (<code>dict[<span title="src.api.shopping_list.Unit">Unit</span>, <span title="src.api.shopping_list.Number">Number</span>]</code>)
              –
              <div class="doc-md-description">
                <p>a mapping of amounts to units. For units that can't be merged
like "cm" and "g"</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>src/api/shopping_list.py</code></summary>
              <pre class="highlight"><code class="language-python">class MergedIngredient(BaseModel):
    """
    Container class to hold merged Ingredients. Handles a mixture of
    amountless, unitless, and fully populated Ingredients. It is not possible
    to merge a fully populated unit with an amountless unit -- e.g. "2, kg,
    potatoes" and "potatoes". This is why we need the following attributes

    Attributes:
        amountless: for Ingredients without an amount, we just want to keep
            track of which recipes we need them for. So that instead of seeing
            "coriander" in the shopping list, we see "coriander: enough for
            recipes A, B, C"
        unitless: for Ingredients with no units, we can simply add the amounts,
            e.g. "2 apples" + "3 apples" = "5 apples"
        units: a mapping of amounts to units. For units that can't be merged
            like "cm" and "g"
    """

    # from "apples" -&gt; display as "enough for x"
    amountless: list[RecipeName] = []

    # from "4 apples"
    unitless: Number = 0

    # from "4 kg apples"
    units: dict[Unit, Number] = Field(default_factory=dict)</code></pre>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>


</div>



<div class="doc doc-object doc-function">



<h2 id="src.api.shopping_list.merge_recipes" class="doc doc-heading">
          <code class="highlight language-python">merge_recipes(recipes)</code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Create a combined shopping list by merging the ingredients from multiple
recipes.</p>



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>recipes</code></b>
                  (<code>list[<span title="src.api.recipe.Recipe">Recipe</span>]</code>)
              –
              <div class="doc-md-description">
                <p>the list of recipes we want to generate a shopping list for</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
    <th class="field-name">Returns:</th>
    <td class="field-body">
      <ul class="first simple">
          <li>
                <code><span title="src.api.shopping_list.ShoppingList">ShoppingList</span></code>
            –
            <div class="doc-md-description">
              <p>the merged shopping list</p>
            </div>
          </li>
      </ul>
    </td>
    </tr>
  </tbody>
</table>
          <details class="quote">
            <summary>Source code in <code>src/api/shopping_list.py</code></summary>
            <pre class="highlight"><code class="language-python">def merge_recipes(recipes: list[Recipe]) -&gt; ShoppingList:
    """
    Create a combined shopping list by merging the ingredients from multiple
    recipes.

    Args:
        recipes: the list of recipes we want to generate a shopping list for

    Returns:
        the merged shopping list
    """
    shopping_list = {}
    for recipe in recipes:
        for ing in recipe.ingredients:
            merged = shopping_list.get(ing.name, MergedIngredient())
            match [ing.amount, ing.unit]:
                case [0, ""]:
                    merged.amountless.append(recipe.name)
                case [amount, ""]:
                    merged.unitless += amount
                case [amount, unit]:
                    amount, unit = normalise(amount, unit)
                    merged.units[unit] = merged.units.get(unit, 0) + amount
            shopping_list[ing.name] = merged

    return shopping_list</code></pre>
          </details>
  </div>

</div>



  </div>

  </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../unit/" class="btn btn-neutral float-left" title="Unit"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../ingredient/" class="btn btn-neutral float-right" title="Ingredient">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../unit/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../ingredient/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
      <script src="../../js/version-select.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
